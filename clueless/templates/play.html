<!-- cluelesstemplates/play.html -->
{% extends 'base.html' %}

{% block title %}Clue-Less{% endblock %}

{% block content %}
{% if user.is_authenticated %}
  <h1>Play Game</h1>

  <h3>Player List</h3>
  <ul id="player-list"></ul>

  <h3>Game Board</h3>
  <table border="1">
    <tbody>
      <tr>
        <td>
          <b>Study</b>
          <p id="study-players"></p>
        </td>
        <td>
          <b>Study - Hall</b>
          <p id="study-hall-players"></p>
        </td>
        <td>
          <b>Hall</b>
          <p id="hall-players"></p>
        </td>
        <td>
          <b>Hall - Lounge</b>
          <p id="hall-lounge-players"></p>
        </td>
        <td>
          <b>Lounge</b>
          <p id="lounge-players"></p>
        </td>
      </tr>
      <tr>
        <td>
            <b>Study - Library</b>
            <p id="study-library-players"></p>
        </td>
        <td></td>
        <td>
            <b>Hall - Billiard Room</b>
            <p id="hall-billiard-players"></p>
        </td>
        <td></td>
        <td>
            <b>Lounge - Dining Room</b>
            <p id="lounge-dining-players"></p>
        </td>
      </tr>
      <tr>
        <td>
            <b>Library</b>
            <p id="library-players"></p>
        </td>
        <td>
            <b>Library - Billiard Room</b>
            <p id="library-billiard-players"></p>
        </td>
        <td>
            <b>Billiard Room</b>
            <p id="billiard-players"></p>
        </td>
        <td>
            <b>Billiard Room - Dining Room</b>
            <p id="billiard-dining-players"></p>
        </td>
        <td>
            <b>Dining Room</b>
            <p id="dining-players"></p>
        </td>
      </tr>
      <tr>
        <td>
            <b>Library - Conservatory</b>
            <p id="library-conservatory-players"></p>
        </td>
        <td></td>
        <td>
            <b>Billiard Room - Ballroom</b>
            <p id="billiard-ballroom-players"></p>
        </td>
        <td></td>
        <td>
            <b>Dining Room - Kitchen</b>
            <p id="dining-kitchen-players"></p>
        </td>
      </tr>
      <tr>
        <td>
            <b>Conservatory</b>
            <p id="conservatory-players"></p>
        </td>
        <td>
            <b>Conservatory - Ballroom</b>
            <p id="conservatory-ballroom-players"></p>
        </td>
        <td>
            <b>Ballroom</b>
            <p id="ballroom-players"></p>
        </td>
        <td>
            <b>Ballroom - Kitchen</b>
            <p id="ballroom-kitchen-players"></p>
        </td>
        <td>
            <b>Kitchen</b>
            <p id="kitchen-players"></p>
        </td>
      </tr>
    </tbody>
  </table>

  <h4>Character:</h4>
  <select id="character">
    <option value="Miss Scarlet">Miss Scarlet</option>
    <option value="Mrs. Peacock">Mrs. Peacock</option>
    <option value="Professor Plum">Professor Plum</option>
    <option value="Mr. Green">Mr. Green</option>
    <option value="Colonel Mustard">Colonel Mustard</option>
    <option value="Mrs. White">Mrs. White</option>
  </select>

  <br/>

  <h4>Weapon:</h4>
  <select id="weapon">
    <option value="Rope">Rope</option>
    <option value="Lead Pipe">Lead Pipe</option>
    <option value="Knife">Knife</option>
    <option value="Wrench">Wrench</option>
    <option value="Candlestick">Candlestick</option>
    <option value="Revolver">Revolver</option>
  </select>

  <br/>

  <h4>Room:</h4>
  <select id="room">
    <option value="Study">Study</option>
    <option value="Hall">Hall</option>
    <option value="Lounge">Lounge</option>
    <option value="Library">Library</option>
    <option value="Billiard Room">Billiard Room</option>
    <option value="Dining Room">Dining Room</option>
    <option value="Conservatory">Conservatory</option>
    <option value="Ballroom">Ballroom</option>
    <option value="Kitchen">Kitchen</option>
  </select>

  <script>
    $(document).ready( function() {
      getPlayers();
      getGameState();

      function getGameState() {
        $.get("{% url 'game' %}", {}, function(data) {
          console.log(data);
        });
        setTimeout(getGameState, 2000);
      }

      function getPlayers() {
        // TODO: Get list of players in game and display username - character
        //  Put the result into player-list
      }
  });
  </script>
{% else %}
  <script>
    location.replace("{% url 'index' %}")
  </script>
{% endif %}
{% endblock %}
